.dashboard-loading {
  padding: 60px;
  font-size: 1.2rem;
  text-align: center;
}

// Nouvelle mise en page admin
// Couleurs alignées sur project.scss
// Reprise de la palette brand-from / brand-to avec déclinaisons
$imported-fonts: true;
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700;800&family=Open+Sans:wght@400;500;600;700&display=swap');

$brand-from: #F18585;
$brand-to: #C174F2;
$bg-deep: #0f1426;
$bg-alt: #10192e;
$bg-alt2: #0e1729;
$bg-alt3: #142033; // nuance supplémentaire
$light-surface: #f2f4f8;
$light-surface-alt: #e8ecf2;
$border-col: rgba(255,255,255,0.08);
$text-col: #fff;
$muted: rgba(255,255,255,.72);

.admin-dashboard {
  display: grid;
  grid-template-columns: 250px 1fr;
  min-height: 100vh;
  background: linear-gradient(135deg, $bg-deep, $bg-alt2 70%);
  color: $text-col;
  font-family: 'Open Sans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  position: relative;
}

// Police titres
.admin-dashboard h1,
.admin-dashboard h2,
.admin-dashboard h3,
.admin-dashboard h4,
.admin-dashboard h5,
.admin-dashboard .brand,
.admin-dashboard .nav-sections button .lbl,
.admin-dashboard .count-badge {
  font-family: 'Montserrat', 'Open Sans', system-ui, sans-serif;
  font-weight: 600;
  letter-spacing: .5px;
}

// Ajustements poids/tailles spécifiques
.admin-dashboard h1 { font-weight: 700; }
.admin-dashboard h2 { font-weight: 600; }
.admin-dashboard .nav-sections button { font-weight: 600; }
.admin-dashboard .count-badge { font-weight: 700; }

.sidebar {
  background: linear-gradient(180deg, $brand-from, $brand-to 85%);
  border-right: 1px solid rgba(255,255,255,0.12);
  padding: 24px 20px 18px;
  display: flex;
  flex-direction: column;
  gap: 26px;
  box-shadow: 0 0 20px -4px rgba(0,0,0,.35);
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
}

.sidebar .brand {
  font-size: 1.15rem;
  font-weight: 600;
  letter-spacing: .5px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}
.close-btn {
  background: rgba(255,255,255,0.18);
  border: 1px solid rgba(255,255,255,0.3);
  color:#fff;
  width:34px;
  height:34px;
  border-radius:10px;
  cursor:pointer;
  font-size:16px;
  line-height:1;
  display:none; /* visible seulement mobile */
  transition: background .2s, transform .18s;
}
.close-btn:hover { background: rgba(255,255,255,0.28); transform: translateY(-2px); }

.user-box {
  background: rgba(255,255,255,0.12);
  border: 1px solid rgba(255,255,255,0.25);
  padding: 12px 14px;
  border-radius: 14px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-size: .78rem;
  box-shadow: 0 4px 14px -4px rgba(0,0,0,.4);
}
.user-box .u-email { font-weight: 500; word-break: break-all; }
.user-box .u-role {
  align-self: flex-start;
  background: #0063cc;
  padding: 3px 10px 4px;
  border-radius: 14px;
  text-transform: uppercase;
  font-size: .6rem;
  letter-spacing: .5px;
}

.nav-sections ul {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.nav-sections button {
  width: 100%;
  background: rgba(255,255,255,0.14);
  border: 1px solid rgba(255,255,255,0.22);
  color: #fff;
  padding: 10px 12px;
  border-radius: 12px;
  display: flex;
  gap: 10px;
  align-items: center;
  cursor: pointer;
  font-size: .8rem;
  font-weight: 600;
  letter-spacing: .4px;
  transition: background .22s, transform .16s, box-shadow .22s;
  backdrop-filter: blur(2px);
}
.nav-sections button .ico { font-size: 1.05rem; }
.nav-sections button.active,
.nav-sections button:hover {
  background: #fff;
  color: #121212;
  box-shadow: 0 6px 18px -6px rgba(0,0,0,.45);
  transform: translateY(-2px);
}

.logout-btn-full {
  margin-top: auto;
  background: linear-gradient(135deg, #ff6666, #ff2f2f);
  border: 1px solid rgba(255,255,255,0.3);
  color: #fff;
  padding: 12px 16px;
  border-radius: 14px;
  cursor: pointer;
  font-size: .75rem;
  font-weight: 700;
  letter-spacing: .6px;
  text-transform: uppercase;
  transition: filter .25s, transform .18s;
  box-shadow: 0 6px 18px -6px rgba(0,0,0,.55);
}
.logout-btn-full:hover { filter: brightness(1.08); transform: translateY(-2px); }
.logout-btn-full:active { transform: translateY(0); }

.main-panel {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background: linear-gradient(180deg,$light-surface 0%,$light-surface-alt 120%);
  color: #1d2a3b;
}
.panel-header {
  padding: 20px 30px 6px;
  display: flex;
  align-items: center;
  gap: 14px;
}
.panel-header h1 { margin:0; font-size:1.55rem; letter-spacing:.5px; }
.menu-toggle {
  display: none;
  background: linear-gradient(135deg,$brand-from,$brand-to);
  color: #fff;
  border: 1px solid rgba(255,255,255,0.35);
  border-radius: 10px;
  padding: 8px 12px;
  font-size: 1rem;
  cursor: pointer;
  box-shadow: 0 4px 14px -4px rgba(0,0,0,.5);
  transition: filter .2s, transform .15s;
}
.menu-toggle:hover { filter: brightness(1.08); transform: translateY(-1px); }
.panel-content {
  padding: 16px 34px 46px;
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 34px;
}

// Listes génériques
.list-wrapper { display:flex; flex-direction:column; gap:16px; }
.list-header { display:flex; align-items:center; gap:12px; }
.list-header h2 { margin:0; font-size:1.1rem; }
.count-badge { background:rgba(255,255,255,0.12); padding:4px 10px; border-radius:20px; font-size:.7rem; letter-spacing:.5px; }
.generic-list { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; border:1px solid rgba(255,255,255,.08); border-radius:18px; overflow:hidden; backdrop-filter: blur(2px); }
.generic-list li { padding:12px 18px 14px; display:flex; flex-direction:column; gap:4px; background:linear-gradient(135deg,rgba(255,255,255,0.06),rgba(255,255,255,0.02)); }
.generic-list li:nth-child(odd) { background:linear-gradient(135deg,rgba(255,255,255,0.09),rgba(255,255,255,0.03)); }
.generic-list li + li { border-top:1px solid rgba(255,255,255,0.08); }
.generic-list .primary { font-size:.83rem; font-weight:600; letter-spacing:.35px; }
.generic-list .secondary { font-size:.68rem; opacity:.74; line-height:1.2; }
.empty { font-size:.8rem; opacity:.7; }
.section-loading, .section-error, .inline-loading { font-size:.8rem; }
.section-error { color:#ff8b7a; }

// Recyclage des cartes existantes pour l'overview
.cards-grid { grid-template-columns: repeat(auto-fill,minmax(250px,1fr)); }
.card { 
  min-height: 160px; 
  background: linear-gradient(150deg,$bg-alt,$bg-alt2 60%,$bg-alt3 100%); 
  color: #fff; 
  border:1px solid rgba(255,255,255,0.08);
}
.card p, .card li { color: rgba(255,255,255,.85); }
.kv-list { list-style:none; margin:8px 0 0; padding:0; display:flex; flex-direction:column; gap:6px; }
.kv-list li { display:flex; justify-content:space-between; align-items:center; font-size:.72rem; background:rgba(255,255,255,0.05); padding:6px 10px; border-radius:8px; }
.kv-list li .k { font-weight:700; letter-spacing:.4px; font-family:'Montserrat',sans-serif; margin-right:14px; flex: 0 0 auto; }
.kv-list li .v { font-weight:500; font-family:'Open Sans',sans-serif; max-width:55%; text-align:right; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
@media (max-width: 520px) { .kv-list li { font-size:.68rem; } .kv-list li .v { max-width:50%; } }
.card h2 { font-size: 1rem; }
.card details summary { font-size:.7rem; }

@media (max-width: 1000px) {
  .admin-dashboard { grid-template-columns: 220px 1fr; }
}
@media (max-width: 820px) {
  .admin-dashboard { grid-template-columns: 1fr; }
  .sidebar { 
    position: fixed; 
    left: 0; 
  top: var(--global-header-height, 70px);
    width:250px; 
    height:100vh; 
    transform: translateX(-110%);
    transition: transform .32s cubic-bezier(.4,.0,.2,1); 
    z-index: 60; 
    padding-top: max(16px, env(safe-area-inset-top));
  }
  .sidebar.open { transform: translateX(0); }
  .sidebar .brand .close-btn { display:inline-flex; align-items:center; justify-content:center; }
  .user-box { display:flex; }
  .sidebar-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.45);
    backdrop-filter: blur(2px);
    z-index: 55;
    animation: fadeIn .3s ease;
  }
  @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
  .menu-toggle { display: inline-flex; }
  .panel-header { padding:16px 18px 4px; }
  .panel-content { padding:14px 18px 40px; }
}
/* Chip utilisateur dans le header principal (mobile) */
.mobile-user-chip { display:none; margin-left:auto; align-items:center; gap:10px; background:linear-gradient(135deg,$brand-from,$brand-to); padding:6px 12px; border-radius:14px; box-shadow:0 4px 12px -4px rgba(0,0,0,.4); }
.mobile-user-chip .email { font-size:.6rem; max-width:110px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-weight:600; }
.mobile-user-chip .role { background:rgba(255,255,255,0.18); padding:2px 8px 3px; border-radius:10px; font-size:.55rem; text-transform:uppercase; letter-spacing:.6px; }
.mobile-user-chip .mini-logout { background:rgba(255,255,255,0.18); border:1px solid rgba(255,255,255,0.35); color:#fff; border-radius:8px; padding:4px 6px; cursor:pointer; font-size:.65rem; line-height:1; transition:background .2s, transform .18s; }
.mobile-user-chip .mini-logout:hover { background:rgba(255,255,255,0.28); transform:translateY(-2px); }

@media (max-width: 820px) {
  .mobile-user-chip { display:inline-flex; }
}
@media (max-width: 480px) {
  .mobile-user-chip .email { max-width:78px; }
}
@media (max-width: 480px) {
  .nav-sections button { padding:9px 10px; }
  .nav-sections button .lbl { display: none; }
  .nav-sections button { justify-content: center; }
  .user-box .u-email { font-size: .65rem; }
  .panel-header h1 { font-size:1.05rem; }
}
@media (max-width: 520px) {
  .nav-sections button { font-size:.7rem; padding:8px 10px; }
  .logout-btn-full { padding:10px 14px; font-size:.65rem; }
  .panel-header h1 { font-size:1.25rem; }
  .generic-list li { padding:10px 14px 12px; }
}

.dashboard-container {
  width: 100%;
  max-width: 1200px;
  margin: 40px auto 80px;
  padding: 0 32px;
  display: flex;
  flex-direction: column;
  gap: 32px;
  color: #fff;
}

.dashboard-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  h1 {
    margin: 0;
    font-size: 2.2rem;
    letter-spacing: .5px;
  }
}

.user-chip {
  display: flex;
  gap: 12px;
  align-items: center;
  background: rgba(255,255,255,0.07);
  padding: 10px 18px;
  border-radius: 40px;
  backdrop-filter: blur(4px);
  .user-email {
    font-weight: 500;
  }
  .role {
    background: #0063cc;
    padding: 4px 10px;
    border-radius: 14px;
    font-size: .75rem;
    text-transform: uppercase;
    letter-spacing: .5px;
  }
  .logout-btn {
    background: #c62828;
    border: none;
    color: #fff;
    padding: 6px 14px;
    border-radius: 20px;
    cursor: pointer;
    font-size: .8rem;
    transition: background .2s;
    &:hover {
      background: #e53935;
    }
  }
}

.cards-grid {
  display: grid;
  gap: 24px;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
}

.card {
  background: linear-gradient(145deg,#15213d,#460270 90%);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 18px;
  padding: 22px 22px 26px;
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 14px;
  box-shadow: 0 8px 18px -6px rgba(0,0,0,0.45);
  h2 {
    margin: 0;
    font-size: 1.15rem;
    letter-spacing: .5px;
  }
  p {
    margin: 0;
    line-height: 1.4;
    font-size: .9rem;
  }
  .mini-info {
    list-style: none;
    padding: 0;
    margin: 4px 0 0;
    display: flex;
    flex-direction: column;
    gap: 4px;
    font-size: 1rem;
    opacity: .9;
    li {
      word-break: break-all;
    }
  }
  .action-btn {
    background: #00aced;
    border: none;
    color: #fff;
    padding: 10px 14px;
    border-radius: 10px;
    cursor: pointer;
    font-size: .8rem;
    font-weight: 600;
    letter-spacing: .5px;
    transition: background .2s, transform .15s;
    &:hover {
      background: #0696cb;
      transform: translateY(-2px);
    }
    &:active {
      transform: translateY(0);
    }
    & + .action-btn {
      margin-top: 8px;
    }
  }
}

.raw-token {
  details {
    background: rgba(255,255,255,0.05);
    padding: 16px 20px;
    border-radius: 14px;
    summary {
      cursor: pointer;
      font-weight: 600;
      outline: none;
    }
    pre {
      margin-top: 14px;
      max-height: 260px;
      overflow: auto;
      background: rgba(0,0,0,0.35);
      padding: 14px;
      border-radius: 10px;
      font-size: .7rem;
      line-height: 1.25;
    }
  }
}

@media (max-width: 640px) {
  .dashboard-container {
    padding: 0 18px;
    margin-top: 24px;
  }
  .dashboard-header h1 {
    font-size: 1.7rem;
  }
  .user-chip {
    margin-top: 12px;
    flex-wrap: wrap;
    justify-content: center;
  }
}